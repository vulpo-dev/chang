{
  "db_name": "PostgreSQL",
  "query": "\r\nwith insert_history as (\r\n\tinsert into chang.task_history(task_id, from_state, to_state)\r\n\tselect chang.tasks.id as task_id\r\n\t     , chang.tasks.state as from_state \r\n\t     , $2 as to_state\r\n\t  from chang.tasks\r\n\t where id = $1\r\n\treturning task_id as id\r\n)\r\nupdate chang.tasks\r\n   set state = $2\r\n where id in (select * from insert_history)\r\n",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Uuid",
        {
          "Custom": {
            "name": "tasks_state",
            "kind": {
              "Enum": [
                "available",
                "cancelled",
                "completed",
                "discarded",
                "retryable",
                "running",
                "scheduled"
              ]
            }
          }
        }
      ]
    },
    "nullable": []
  },
  "hash": "e28de08129b4bccf4b272fcbaf7d999c075f965e3f5143bf2f3a128669200fca"
}
